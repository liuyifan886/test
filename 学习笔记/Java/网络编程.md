在网络通信协议下，不同计算机上运行的程序，进行的数据传输
本质上是计算机跟计算机之间通过网络进行数据传输，Java中可以使用java.net包下的技术轻松开发出常见的网络应用程序
应用场景：即时通信，网游对战，金融证券，国际贸易，邮件等等


#### 常见的网络架构
CS：Client/Server(客户端/服务器)，在用户本地需要下载并安装客户端程序，在远程有一个服务器端程序
BS：Browser/Server(浏览器/服务器)，只需要一个浏览器，用户通过不同的网址，客户访问不同的服务器
**BS架构优缺点**：
**优点**：
不需要开发客服端，只需要页面+服务器
用户不需要下载，打开浏览器就能使用
缺点：
如果应用过大，用户体验会有影响

**CS架构优缺点**：
**优点**：
画面可以做的非常精美，用户体验好
缺点：
需要开发客户端，也需要开发服务器
用户需要下载和更新的时候太麻烦



#### 网络编程三要素
IP，端口号，协议
##### IP
设备在网络中的地址，是唯一的标识
全程：Internet protocol，是互联网协议地址，也称IP地址，是分配给上网设备的数字标签
通俗理解：上网设备在网络中的地址，是唯一的
常见的IP分类为：IPv4，IPv6
IPv4
全称Internet protocol version 4，互联网通信协议第四版
采用32位地址长度，分成4组
最多只有四十多亿IP地址，不够用了，IPv6随即出现
![[Pasted image 20240713125129.png]]
IPv6
全称Internet protocol version 6，互联网通信协议第六版
由于互联网的蓬勃发展，IP地址的需求量愈来愈大，而IPv4的模式下IP的总数量是有限的
采用128位地址长度，分成8组
![[Pasted image 20240713125850.png]]
现在IPv6还没有普及，还在通过节省IPv4的IP来使用，很多公共场所会用一个IP去开设局域网![[Pasted image 20240714143858.png]]
特殊IP地址
127.0.0.1，也可以是localhost，是回送地址也称本地回环地址，也称本机IP，永远只会寻找当前所在本机
常用的CMD命令
ipconfig：查看本机IP地址
ping：检查网络是否连通

###### InetAddress类的使用
他表示IP的类，也可看成是这台电脑的类
不能直接去new，要用方法去获取对象，就是下面的那个getByName方法
![[Pasted image 20240714171347.png]]
常用方法
![[Pasted image 20240714171235.png]]
#### 端口号
应用程序在设备中唯一的标识，由两个字节表示的整数，取值范围：0~65535，其中0~1023之间的端口号用于一些知名的网络服务或者应用，我们自己使用1024以上的端口号就可以了，概念图相当于这样
![[Pasted image 20240714180128.png]]
一个端口号只能被一个应用程序使用 

#### 协议
计算机网络中，连接和通信的规则被称为网络通信协议
OSI参考模型，世界互联协议标准，全球通信规范，单模型过于理想化，未能在英特网上进行广泛传播
TCP/IP参考模型(或TCP/IP协议)：事实上的国际标准
![[Pasted image 20240714181728.png]]
UDP协议
用户数据报协议(User Dategram)
UDP是面向无连接通信协议(不管是否连接成功)
速度快，有大小限制一次最多发送64k，数据不安全，易丢失数据

TCP协议
传输控制协议TCP(Transmission Control Protocol)
TCP协议是面向连接的通信协议(检查确保连接成功)
速度慢，没有大小限制，数据安全
数据在网络中传输的规则，常见的协议有UDP，TCP,http，https，ftp

##### UDP通信程序(发送数据)
可以用一个比喻，一个男生给一个异地的女朋友送礼物，步骤是
1.找快递公司  = 创建发送端的DatagramSocket对象
2.打包礼物  =  数据打包(DatagramPacket)
3.快递公司发送包裹  =  发送数据
4.付钱走人  =  释放资源

详细步骤
![[Pasted image 20240715112228.png]]
![[Pasted image 20240715113309.png]]![[Pasted image 20240715113324.png]]


##### UDP通信程序(接收数据)
![[Pasted image 20240715120116.png]]

![[Pasted image 20240715121022.png]]
![[Pasted image 20240715121037.png]]![[Pasted image 20240715121052.png]]
![[Pasted image 20240715121102.png]]

#### UDP的三种通信方式
单播：一对一
组播：一对一组
![[Pasted image 20240723121248.png]]
广播：一对所有
![[Pasted image 20240723121257.png]]

和单播不同的是单播创建的是DatagramSocket，而组播是MulticastSocket，其他的一样，在发送的时候要用组播地址
![[Pasted image 20240723135040.png]]
还有就是在接收端要把当前主机，添加到224.0.0.1的这一组中
![[Pasted image 20240723135624.png]]



#### TCP通信程序
TCP通信协议是一种可靠的网络协议，它在通信的两端各建立一个Socket对象，通信之前要保证连接已经建立，通过Socket产生IO流来进行网络通信
![[Pasted image 20240724120036.png]]
客户端代码该怎么写
1.创建Socket对象
![[Pasted image 20240724121057.png]]
2.可以从连接通道中获取输出流
![[Pasted image 20240724121133.png]]
3.释放资源
![[Pasted image 20240724121151.png]]


服务器代码该怎么写
1.创建对象ServerSocket
![[Pasted image 20240724121657.png]]
2.监听客户端的链接
![[Pasted image 20240724121727.png]]
3.从连接通道中获取输入流读取数据
![[Pasted image 20240724121916.png]]
4.释放资源
![[Pasted image 20240724121902.png]]
直接用字节流是读不了中文的，所以需要转换成字符流来读中文，这里要注意

tcp细节
![[Pasted image 20240724225528.png]]
![[Pasted image 20240724225538.png]]

三次握手粗解
![[Pasted image 20240726134739.png]]
四次挥手粗解(确保连接断开，且数据处理完毕)
![[Pasted image 20240726134941.png]]

#### 练习中的一些小细节
在读取文件的时候服务器想要给客户端回馈，但是因为read方法会等待客户端发送数据，即使客户端已经没什么可发送的了，这个时候我们为了跳出read方法的循环，应该使用一个方法，这样就能关闭俩你姐通道来让代码继续运行下去来让服务器进行一个回馈
![[Pasted image 20240727223805.png]]
![[Pasted image 20240727223749.png]]
在Java中有一个类能生成随机的唯一的标识符UUID,我们在网站上下载的图片照片名字和这个是一样的
使用方法UUID.randomUUID()，它获取出来的标识符是带-的，我们要手动给它搞掉
![[Pasted image 20240728135853.png]]